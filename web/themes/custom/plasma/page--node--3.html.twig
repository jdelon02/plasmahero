{% include '/themes/custom/plasma/header.html.twig' %}
{% set hdirectory = '/themes/custom/plasma/' %}
<!--<div class="hero become-a-hero">
    <div class="main-container">
      <div class="caption-container">
        <h1 class="heading-1">Become A Hero</h1>
        <p class="hero-caption">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod convallis semp.</p>
      </div>
    </div>
  </div>-->
  <div class="intro intro-section-2" data-ix="fade-in-on-scroll">
    <div class="main-container" data-ix="move-up-on-scroll">
      <div class="heading-section">
	  <div class="contextual-region">
		  	{{ contextual_links('block_content:block_content=16') }}
			{{ drupal_block('block_content:9a82b301-93fb-4749-8ae7-df16700495ed') }}
		</div>
      </div>
      <div class="flex-container-4">
        <div class="half">
          	{{node.field_body_left.value|raw}}
	  </div>
	  <div class="half">
	  	{{node.body.value|raw}}
        </div>
      </div>
    </div>
  </div>
  <div class="red-orange-section section-2" data-ix="fade-in-on-scroll">
    <div class="main-container center-align" data-ix="move-up-on-scroll">
	{{drupal_block('block_content:5ccdbe1c-ddd8-41c3-9b63-750de4342fad') }}
      <!--<div class="flex-container-1">
        <div class="droplet-image-container center-align">
          <a href="/hero" class="image-link w-inline-block">
            <div class="droplet-image droplet-4">
              <div class="mask-2"></div>
            </div>
          </a>
        </div>
        <div class="two-third left-align left-padding">
          <h2 class="heading-2 white">How Can I Help?</h2>
          <p class="paragraph-2">Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit.</p>
          <ul role="list" class="list">
            <li>
              <p class="list-paragraph">Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </li>
            <li>
              <p class="list-paragraph">Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
            </li>
            <li>
              <p class="list-paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam hendrerit nisi sed sollicitudin pellentesque. Nunc posuere purus rhoncu.</p>
            </li>
          </ul>
        </div>-->
      </div>
    </div>
  </div>
  <div id="Donate" class="intro" data-ix="fade-in-on-scroll">
    <div class="main-container">
      <div class="flex-container-4" data-ix="move-up-on-scroll">
        <div class="half">
			<div class="contextual-region">
			{{ contextual_links('block_content:block_content=7') }}
			{{drupal_block('block_content:238bb644-a91c-4a9d-ae15-adcf8ae3b2c9') }}
			</div>
        </div>
        <div class="half">
			<div class="contextual-region">
			{{ contextual_links('block_content:block_content=8') }}
         	{{drupal_block('block_content:be15f9e4-ed0b-4fff-95ed-bf96e28ecf76') }}
			</div>
        </div>
      </div>
      <div class="flex-container-5" data-ix="move-up-on-scroll"><img src="/themes/custom/plasma/images/donate-pin.svg" alt="" class="donate-pin-2">
        <div class="donate-text">
          <h3 class="heading-3">Find a Donation Center:</h3>
        </div>
      </div>
      <div class="media-container" data-ix="move-up-on-scroll">
        <!--<div class="google-map w-embed w-iframe"><iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d7473570.428231882!2d-103.76406691048783!3d39.5426183543055!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1splasma%20donation%20center!5e0!3m2!1sen!2sus!4v1597161644299!5m2!1sen!2sus" width="100%" height="650" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe></div>-->
		</div>
		<div class="media-container" data-ix="move-up-on-scroll">
		<div class="google-map w-embed w-iframe" id="test" style="width:100%;height:650px"></div>
      <style>
	  .marker {
    	width: 25px;
    	height: 25px;
    	background-repeat: no-repeat;
		background-size:contain;
	  }
	  </style>
	  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	  <script>
	  //If you have to maintain this, I would like to say I'm sorry for the mess you now have to deal with
	  //To add pins you need to add the pins in drupal and visit /pin-cache-rebuilder, on that page the json cache will be rebuilt and can be pulled from using $.getJSON. The pin cache code is in page--node--566.html.twig.
	  //Good luck! - Connor
	  var latlist = [];
	  var longlist = [];
	  
			//console.log(longlist);
    		//long = data.results.geometry.location.lng;
			//lat = data.results.geometry.location.lat;
		
	  $( document ).ready(function() {
		mapboxgl.accessToken = 'pk.eyJ1IjoiY29ubm9ybWNkeGMiLCJhIjoiY2sydW5tMHkyMDFpcTNjcXJ2dnowMGc3NSJ9.j9uJ0tNMYUceEPpQez1eDw';
		var map = new mapboxgl.Map({
		container: 'test',
		style: 'mapbox://styles/connormcdxc/ckdt4qtad1ksn19n9do4fnsb2', // stylesheet location
		center: [-100, 39], // starting position [lng, lat]
		zoom: 3.5 // starting zoom
		});
		
		$.getJSON('/json/pins.json', function(data) {
			for (i = 0; i < data.length; i++) {
  				console.log(data[i].lat);
				// make a background image for each marker and add to the map
				var el = document.createElement('div');
				el.className = 'marker';
				var img_url = '/themes/custom/plasma/images/mappin.svg';
				el.style.backgroundImage = 'url(' + img_url + ')';

				//add the actual marker to the map
				var marker = new mapboxgl.Marker(el)
				.setLngLat([data[i].long,data[i].lat])
				.setPopup(new mapboxgl.Popup({ offset: 25 })
    			.setHTML('<h5>'+ data[i].title +'</h5><p><a target="_blank" href="https://www.google.com/maps/place/'+ data[i].formadd +'">'+ data[i].fulladd +'</a></p>'))
				.addTo(map);
			}
		});
		{# for pin in pins#}

		//var long = longlist[{{loop.index}}];
		//var lat = latlist[{{loop.index}}];
		//console.log(long+','+lat);


		{#endfor #}
		});
		</script>
	  </div>
      <div class="flex-container-2" data-ix="move-up-on-scroll">
        <div class="two-third left-align right-padding justify">
		<div class="contextual-region">
		  	{{ contextual_links('block_content:block_content=17') }}
			{{ drupal_block('block_content:cd1e5919-945f-48f0-8949-7aecd9444ec7') }}
		</div>
          <div class="w-form">
		  {{ drupal_entity('webform', 'contact') }}
           <!-- <form id="wf-form-Share-Your-Story" name="wf-form-Share-Your-Story" data-name="Share Your Story" redirect="https://plasma-hero.webflow.io/share-your-story#confirmation" data-redirect="https://plasma-hero.webflow.io/share-your-story#confirmation" class="form">
              <div class="flex-container-4">
                <div class="half"><label for="First-Name">First Name</label><input type="text" class="field w-input" maxlength="256" name="First-Name" data-name="First Name" placeholder="" id="First-Name" required=""></div>
                <div class="half"><label for="Last-Name">Last Name</label><input type="text" class="field w-input" maxlength="256" name="Last-Name" data-name="Last Name" placeholder="" id="Last-Name" required=""></div>
              </div>
              <div class="flex-container-4">
                <div class="half"><label for="Email-4">Email</label><input type="email" class="field w-input" maxlength="256" name="Email" data-name="Email" placeholder="" id="Email-4" required=""></div>
                <div class="half"><label for="Phone">Phone</label><input type="tel" class="field w-input" maxlength="256" name="Phone" data-name="Phone" placeholder="" id="Phone" required=""></div>
              </div>
              <div class="flex-container-4">
                <div class="full"><label for="Message-3">Message</label><textarea name="Message" maxlength="5000" id="Message-3" data-name="Message" required="" class="textarea w-input"></textarea></div>
              </div><input type="submit" value="Send" data-wait="Please wait..." class="submit-button w-button"></form>-->
            <div class="w-form-done">
              <div>Thank you! Your submission has been received!</div>
            </div>
            <div class="w-form-fail">
              <div>Oops! Something went wrong while submitting the form.</div>
            </div>
          </div>
        </div>
        <div class="droplet-image-container center-align">
          <a href="/hero" class="image-link w-inline-block">
            <div class="droplet-image droplet-5">
              <div class="mask-1"></div>
            </div>
          </a>
        </div>
      </div>
    </div>
    <div class="after-intro-bg"></div>
  </div>
  {% include '/themes/custom/plasma/footer.html.twig' %}
